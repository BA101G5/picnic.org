DROP TABLE GENERAL_MEMBER;
DROP TABLE CONTACT_LIST;
DROP TABLE INTERNAL_LETTER;
DROP TABLE CHECKLIST;
DROP TABLE COMMEND;
DROP TABLE BUY_RECORD;
DROP TABLE FORUM_BOARD;
DROP TABLE FORUM_ARTICLE;
DROP TABLE BOARD_FILE;
DROP TABLE BLOCKED_KEYWORDS;
 
 
 
CREATE TABLE GENERAL_MEMBER (
MEM_NO                 VARCHAR2(10) NOT NULL,
MEM_NAME            VARCHAR2(30) NOT NULL,
MEM_GEN               CHAR(1),
MEM_BIRTH            DATE,
MEM_ADDR            VARCHAR2(300),
MEM_MAIL              VARCHAR2(30) NOT NULL UNIQUE,
MEM_PSW               VARCHAR2(128) NOT NULL,
MEM_SELF              VARCHAR2(800),
MEM_PIC                 BLOB,
MEM_COIN              NUMBER(*),
QR_CODE                BLOB,
MEM_STATE            CHAR(1) NOT NULL,
CONSTRAINT GENERAL_MEMBER_PRIMARY_KEY PRIMARY KEY(MEM_NO));
 
CREATE SEQUENCE MEM_NO_SQ
INCREMENT BY 1
START WITH 1
MAXVALUE 99999999
NOCACHE
NOCYCLE;
 
ALTER SESSION SET NLS_LANGUAGE = 'American';
-- 使用列舉欄位方式, 將資料新增至 GENERAL_MEMBER 表中.
-- 1
INSERT INTO GENERAL_MEMBER(MEM_NO, MEM_NAME, MEM_GEN, MEM_BIRTH, MEM_ADDR, MEM_MAIL, MEM_PSW, MEM_SELF, MEM_COIN, MEM_STATE)
VALUES('MG' || LPAD(MEM_NO_SQ.NEXTVAL, 8, '0'), 'shyangs', 'M', '01-JAN-88', '臺北市大安區羅斯福路四段1號', 'shyangs@gmail.com', 'pw00000001', '', 0, 'A');
 
 
 
 
 
 
 
 
 
 
 
 
CREATE TABLE CONTACT_LIST(
MEM_NO                              VARCHAR2(10) NOT NULL,
CONTACT_NO                     VARCHAR2(10) NOT NULL,
RELATIONSHIP                    CHAR(1) NOT NULL,
CONSTRAINT CONTACT_LIST_CONTACTNO_FK FOREIGN KEY (CONTACT_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT CONTACT_LIST_MENNO_FK FOREIGN KEY (MEM_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT CONTACT_LIST_PRIMARY_KEY PRIMARY KEY (MEM_NO, CONTACT_NO));
 
 
CREATE TABLE INTERNAL_LETTER(
LETTER_NO                VARCHAR2(10) NOT NULL,
SENDER_NO               VARCHAR2(10),
RECIPIENT_NO           VARCHAR2(10),
LETTER_MS	              DATE,
LETTER_TEXT            CLOB NOT NULL,
LETTER_TITLE	  VARCHAR2(90) NOT NULL,
LETTER_STATUS        CHAR(1),
CONSTRAINT INTERNAL_LETTER_SENDERNO_FK FOREIGN KEY (SENDER_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT INTERNAL_LETTER_RECIPIENTNO_FK FOREIGN KEY(RECIPIENT_NO) REFERENCES GENERAL_MEMBER(MEM_NO),
CONSTRAINT INTERNAL_LETTER_PRIMARY_KEY PRIMARY KEY(LETTER_NO));
 
 
CREATE TABLE CHECKLIST(
CHLI_NO                     VARCHAR2(10) NOT NULL,
CHLI_CATE                  NUMBER(*) NOT NULL,
CHLI_BE_NUM            VARCHAR2(10) NOT NULL,
CHLI_MEMNO             VARCHAR2(10) NOT NULL,
CHLI_START               DATE NOT NULL,
CHLI_END                   DATE NOT NULL,     
CHLI_DAY                    NUMBER(*) NOT NULL,
CHLI_PUN                    NUMBER(*) NOT NULL,
CHLI_REASON            VARCHAR2(900) NOT NULL,
CHLI_DATE                   DATE NOT NULL,
CHLI_STATUS             CHAR(1),
CONSTRAINT CHECKLIST_CHLINO_FK FOREIGN KEY(CHLI_NO) REFERENCES GENERAL_MEMBER(MEM_NO), 
CONSTRAINT CHECKLIST_PRIMARY_KEY PRIMARY KEY(CHLI_NO));
 
 
 
CREATE TABLE COMMEND(
COMM_MEMNO       VARCHAR2(10) NOT NULL,
COMM_BE_NO         VARCHAR2(10) NOT NULL,
COMM_CATE            NUMBER(*),
COMM_GRADE         NUMBER(*) NOT NULL,
COMM_DATE            DATE NOT NULL,
CONSTRAINT COMMEND_COMMMEMNO_FK FOREIGN KEY(COMM_MEMNO) REFERENCES GENERAL_MEMBER(MEM_NO), 
CONSTRAINT COMMEND_PRIMARY_KEY PRIMARY KEY(COMM_MEMNO,COMM_BE_NO));
 
 
 

CREATE TABLE BUY_RECORD(
BR_ID                   VARCHAR2(10) NOT NULL,
MEM_NO            VARCHAR2(10) NOT NULL, 
BR_DATE             DATE NOT NULL,
BR_CASH             NUMBER(10)NOT NULL,
CONSTRAINT BUY_RECORD_MEMNO_FK FOREIGN KEY(MEM_NO) REFERENCES GENERAL_MEMBER (MEM_NO),
CONSTRAINT BUY_RECORD_PRIMARY_KEY PRIMARY KEY(BR_ID));
 
 
CREATE TABLE FORUM_BOARD(
FORUM_NO                        VARCHAR2(10)NOT NULL,
FORUM_NAME                  VARCHAR2(90)NOT NULL,
FORUM_DESC                     CLOB,
FORUM_STATUS               CHAR(1),
CONSTRAINT FORUM_BOARD_PRIMARY_KEY PRIMARY KEY(FORUM_NO));
 
 
 
 
 
 
 
 
 
 
 
CREATE TABLE FORUM_ARTICLE(
ARTICLE_NO                   VARCHAR2(10)NOT NULL,  
AUTHOR_NO                     VARCHAR2(10),
TOPIC_NO                         VARCHAR2(10),
FORUM_NO                      VARCHAR2(10) NOT NULL,
ARTICLE_TITLE                VARCHAR2(300) NOT NULL,
ARTICLE_TEXT                  CLOB NOT NULL,
ARTICLE_POST                 DATE NOT NULL,
ARTICLE_EDIT                  DATE,
ARTICLE_VIEWS              NUMBER(*)NOT NULL,
ARTICLE_STATUS            CHAR(1),
ARTICLE_KIND                 CHAR(1),
ARTICLE_PW                   VARCHAR2(128),
CONSTRAINT FORUM_ARTICLE_FK FOREIGN KEY(FORUM_NO) REFERENCES FORUM_BOARD(FORUM_NO),
CONSTRAINT FORUM_ARTICLE_PRIMARY_KEY PRIMARY KEY(ARTICLE_NO));
 
 
 
 
CREATE TABLE BOARD_FILE(
FILE_NO                           VARCHAR2(10)NOT NULL,
ARTICLE_NO                   VARCHAR2(10)NOT NULL, 
FILE_NAME                      VARCHAR2(300)NOT NULL,
FILE_DESC                      CLOB,
BD_FILE                            BLOB NOT NULL,
CONSTRAINT BOARD_FILE_ARTICLENO_FK FOREIGN KEY(FILE_NAME) REFERENCES FORUM_ARTICLE(ARTICLE_NO), 
CONSTRAINT BOARD_FILE_PRIMARY_KEY PRIMARY KEY(FILE_NO));
 
CREATE TABLE BLOCKED_KEYWORDS(
KEYWORD_NO                  VARCHAR2(10)NOT NULL,
KEYWORD                          VARCHAR2(90)NOT NULL,
REPLACEMENT                  VARCHAR2(90),
CONSTRAINT BLOCKED_KEYWORDS_PRIMARY_KEY PRIMARY KEY(KEYWORD_NO));
 
 
 
